<!-- Right-side Category Manager drawer (modern look, NO sticky header to avoid mixin issues) -->
<div class="offcanvas offcanvas-end manage-drawer" tabindex="-1" id="dashCategoryManager" aria-labelledby="dashCategoryManagerLabel" style="width:480px;">
  <div class="offcanvas-header">
    <div class="d-flex flex-column gap-1">
      <h5 class="offcanvas-title" id="dashCategoryManagerLabel">
        <nav id="drawer-breadcrumb" class="drawer-breadcrumb"></nav>
        <span id="drawer-selected-path" hidden>(All Categories)</span>
      </h5>
      <div class="small muted d-flex align-items-center flex-wrap gap-2">
        <span>Month:</span>
        <select id="drawer-months" class="form-select form-select-sm d-inline-block w-auto align-middle"></select>
        <span class="mx-1">•</span>
        <span>Total:</span>
        <span id="drawer-total" class="fw-semibold">—</span>
      </div>
    </div>
    <!-- Bootstrap close button (works if Bootstrap present) -->
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>

  <style>
    /* Drawer theming; safe with your neon-tech.css */
    .drawer-breadcrumb{ display:flex; gap:.4rem; flex-wrap:wrap; align-items:center; }
    .drawer-breadcrumb .crumb{ background:var(--hair,rgba(255,255,255,.06)); padding:.2rem .5rem; border-radius:999px; }
    .drawer-breadcrumb .sep{ opacity:.6; }
    .muted{ opacity:.85; }
    .drawer-tabbar{ display:flex; gap:.4rem; border-bottom:1px solid var(--hair, rgba(255,255,255,.08)); margin:.25rem 0 .75rem; }
    .drawer-tab{ padding:.35rem .65rem; border-radius:.5rem .5rem 0 0; text-decoration:none; color:inherit; }
    .drawer-tab.active{ background:var(--hair, rgba(255,255,255,.08)); border:1px solid var(--hair, rgba(255,255,255,.12)); border-bottom-color:transparent; }
    .drawer-pane{ display:none; }
    .tx-neg{ color:#d36b6b; } .tx-pos{ color:#6bd39c; }
    .mono{ font-variant-numeric: tabular-nums; }
    .child-pill{ display:inline-flex; align-items:center; gap:.35rem; line-height:1; padding:.35rem .6rem; border-radius:999px; border:1px solid var(--hair, rgba(255,255,255,.12)); background:var(--hair, rgba(255,255,255,.05)); cursor:pointer; }
    .child-pill .dot{ width:.45rem; height:.45rem; border-radius:50%; background:currentColor; opacity:.65; }
    .child-pill .chev{ opacity:.65; }
  </style>

  <div class="offcanvas-body">

    <!-- Tabs -->
    <div class="drawer-tabbar">
      <a href="#" class="drawer-tab active" data-target="transactions">Overview</a>
      <a href="#" class="drawer-tab" data-target="keywords">Keywords</a>
      <a href="#" class="drawer-tab" data-target="actions">Actions</a>
    </div>

    <!-- Children block (dynamic buttons injected by JS) -->
    <div class="mb-2">
      <div class="fw-semibold mb-1">Children:</div>
      <div id="drawer-children" class="d-flex flex-wrap gap-2 small"></div>
    </div>

    <!-- Transactions (Overview) pane -->
    <div class="drawer-pane" data-pane="transactions" style="display:block;">
      <div class="table-responsive">
        <table class="table table-sm align-middle mb-0">
          <thead>
            <tr>
              <th class="w-25">Date</th>
              <th>Description</th>
              <th class="text-end w-25">Amount</th>
              <th class="w-25">Cat</th>
            </tr>
          </thead>
          <tbody id="drawer-tx-body">
            <tr><td colspan="4" class="text-muted">Loading…</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Keywords pane -->
    <div class="drawer-pane" data-pane="keywords">
      <div class="d-flex align-items-center gap-2 mb-2">
        <input id="kw-add-input" class="form-control form-control-sm" placeholder="Add keyword…" />
        <button id="kw-add-btn" class="btn btn-sm btn-primary">Add</button>
      </div>
      <div id="kw-list" class="d-flex flex-wrap gap-2 small"></div>
    </div>

    <!-- Actions pane (wired by your drawer.js runAction(kind) calls) -->
    <div class="drawer-pane" data-pane="actions">
      <!-- You can place action buttons here and bind them in drawer.js via runAction('yourKind') -->
      <div class="d-flex flex-wrap gap-2 mb-2">
        <!-- Example buttons (safe to keep or replace with your real set) -->
        <button type="button" class="btn btn-sm btn-outline-secondary" data-action="rename">Rename</button>
        <button type="button" class="btn btn-sm btn-outline-secondary" data-action="merge">Merge</button>
        <button type="button" class="btn btn-sm btn-outline-secondary" data-action="hide">Hide</button>
        <button type="button" class="btn btn-sm btn-outline-secondary" data-action="unhide">Unhide</button>
      </div>
      <div class="small text-muted">
        These are placeholders; your <code>drawer.js</code> can listen for clicks on
        <code>[data-action]</code> and call <code>runAction(kind)</code>.
      </div>
    </div>

  </div>
</div>

<!-- Fallback scrim for non-Bootstrap mode (used only if bootstrap.Offcanvas not present) -->
<div id="drawer-scrim" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:1040;"></div>
